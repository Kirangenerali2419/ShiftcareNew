# ShiftCare Appointments - React Native App

A React Native mobile application for scheduling appointments with doctors. Users can browse available doctors, view their weekly schedules with 30-minute appointment slots, and book appointments.

## Features

- **Browse Doctors**: View all available doctors with their timezone information
- **View Availability**: See weekly schedules with 30-minute time slots for each doctor
- **Book Appointments**: Select and confirm appointments with doctors
- **Manage Bookings**: View all booked appointments and cancel them if needed
- **Persistent Storage**: All bookings are saved locally using AsyncStorage
- **Error Handling**: Comprehensive error states and loading indicators
- **Type Safety**: Built with TypeScript for better code reliability

## Tech Stack

- **React Native** (0.73.2) with Expo (~50.0.0)
- **TypeScript** for type safety
- **React Navigation** for navigation
- **AsyncStorage** for local data persistence
- **React Context API** for state management
- **date-fns** and **date-fns-tz** for date/time handling
- **Jest** and **React Testing Library** for testing

## Setup & Installation

### Prerequisites

- Node.js (v16 or higher)
- npm or yarn
- Expo CLI (`npm install -g expo-cli`)
- iOS Simulator (for Mac) or Android Emulator / physical device

### Installation Steps

1. **Clone the repository**
   ```bash
   git clone <repository-url>
   cd shiftcare-appointments
   ```

2. **Install dependencies**
   ```bash
   npm install
   # or
   yarn install
   ```

3. **Start the development server**
   ```bash
   npm start
   # or
   expo start
   ```

4. **Run on your preferred platform**
   - Press `i` for iOS simulator
   - Press `a` for Android emulator
   - Scan QR code with Expo Go app on your physical device

### Running Tests

```bash
npm test
# or
yarn test
```

To run tests in watch mode:
```bash
npm run test:watch
```

## Project Structure

```
shiftcare-appointments/
├── src/
│   ├── components/          # Reusable UI components
│   │   ├── LoadingSpinner.tsx
│   │   └── ErrorView.tsx
│   ├── context/             # React Context for state management
│   │   ├── BookingsContext.tsx
│   │   └── __tests__/
│   ├── navigation/          # Navigation configuration
│   │   └── AppNavigator.tsx
│   ├── screens/             # Screen components
│   │   ├── DoctorsListScreen.tsx
│   │   ├── DoctorDetailScreen.tsx
│   │   ├── BookingConfirmationScreen.tsx
│   │   └── MyBookingsScreen.tsx
│   ├── services/            # API and storage services
│   │   ├── api.ts
│   │   ├── storage.ts
│   │   └── __tests__/
│   ├── types/               # TypeScript type definitions
│   │   └── index.ts
│   └── utils/               # Utility functions
│       ├── timeSlots.ts
│       └── __tests__/
├── App.tsx                  # Main app entry point
├── package.json
├── tsconfig.json
└── README.md
```

## Usage

### Browsing Doctors

1. Launch the app to see the list of available doctors
2. Each doctor card shows:
   - Doctor name
   - Timezone
   - Number of available days per week
3. Tap on a doctor card to view their detailed schedule

### Viewing Availability

1. On the Doctor Detail screen, you'll see:
   - Doctor information
   - Weekly schedule organized by day
   - Available 30-minute time slots
   - Booked slots (marked as unavailable)
2. Tap on an available slot to book an appointment

### Booking an Appointment

1. Select an available time slot
2. Review the booking details on the confirmation screen
3. Confirm the booking
4. The appointment will be saved and the slot will be marked as unavailable

### Managing Bookings

1. Tap "My Bookings" from the home screen
2. View all your booked appointments
3. Cancel appointments by tapping the "Cancel" button
4. Cancelled appointments free up the time slot

## Assumptions & Design Decisions

### Time Zone Handling

- **Assumption**: All times are displayed in the doctor's timezone as specified in the API data
- **Decision**: Used `date-fns-tz` for accurate timezone conversion
- **Note**: The app assumes the user's device timezone matches their local timezone for display purposes

### Slot Generation

- **Assumption**: All time slots are exactly 30 minutes long
- **Decision**: Slots are generated by splitting available windows into 30-minute intervals
- **Edge Case**: If a window doesn't divide evenly by 30 minutes, the last partial slot is excluded

### Data Persistence

- **Decision**: Used AsyncStorage for simplicity and offline capability
- **Limitation**: Data is stored locally on the device only (no cloud sync)
- **Future**: Could be extended to sync with a backend API

### State Management

- **Decision**: Used React Context API instead of Redux Toolkit
- **Reasoning**: Simpler setup for this scope, easier to understand, sufficient for the app's needs
- **Trade-off**: Context API can have performance implications with large state trees, but this app's state is relatively small

### Navigation

- **Decision**: Used React Navigation with native stack navigator
- **Reasoning**: Provides native feel and performance
- **Pattern**: Stack-based navigation with back button support

### Error Handling

- **Strategy**: Graceful degradation with user-friendly error messages
- **Implementation**: Try-catch blocks with fallback UI states
- **User Experience**: Retry mechanisms where appropriate

## Known Limitations

1. **No User Authentication**: The app assumes a single-user experience without authentication
   - **Impact**: All bookings are stored locally without user identification
   - **Future**: Add user accounts and cloud sync

2. **No Real-time Updates**: Bookings made on one device won't appear on another
   - **Impact**: Multi-device usage is not supported
   - **Future**: Implement real-time synchronization via WebSocket or polling

3. **Limited Time Range**: Only shows current week's availability
   - **Impact**: Cannot book appointments beyond the current week
   - **Future**: Add week navigation and future date support

4. **No Appointment Reminders**: No notification system for upcoming appointments
   - **Impact**: Users must manually check their bookings
   - **Future**: Integrate push notifications

5. **No Conflict Detection Across Devices**: If multiple users book the same slot simultaneously, conflicts may occur
   - **Impact**: Race conditions possible in multi-user scenarios
   - **Future**: Implement server-side conflict resolution

6. **Timezone Display**: Assumes user understands doctor's timezone
   - **Impact**: Users need to manually convert times if in different timezone
   - **Future**: Show times in both doctor's and user's timezone

## Testing

The project includes comprehensive tests covering:

- **API Service**: Fetching and processing doctor data
- **Storage Service**: Saving, retrieving, and removing bookings
- **Time Slot Utilities**: Generating and formatting time slots
- **Context**: State management and booking operations

### Test Coverage

- ✅ Edge cases (empty data, invalid inputs)
- ✅ Negative cases (API failures, storage errors)
- ✅ Duplicate booking prevention
- ✅ Timezone handling
- ✅ Slot availability logic

### Running Tests

```bash
# Run all tests
npm test

# Run tests in watch mode
npm run test:watch

# Run tests with coverage
npm test -- --coverage
```

## Future Enhancements

### High Priority

1. **Backend Integration**: Replace mock API with real backend
   - User authentication
   - Server-side booking validation
   - Real-time availability updates

2. **Calendar View**: Add calendar-style UI for better date visualization
   - Month view with available days highlighted
   - Week view with time slots
   - Better date navigation

3. **Push Notifications**: Remind users of upcoming appointments
   - 24-hour reminder
   - 1-hour reminder
   - Appointment cancellation notifications

### Medium Priority

4. **Offline Support**: Queue bookings when offline
   - Store pending bookings locally
   - Sync when connection restored
   - Conflict resolution

5. **Search & Filters**: Enhanced doctor discovery
   - Search by doctor name
   - Filter by timezone
   - Filter by available days

6. **Appointment History**: Track past appointments
   - View completed appointments
   - Appointment notes/feedback
   - Rating system

### Low Priority

7. **Multi-language Support**: Internationalization
   - Support multiple languages
   - Localized date/time formats

8. **Accessibility**: Improve accessibility
   - Screen reader support
   - High contrast mode
   - Larger text options

9. **Analytics**: User behavior tracking
   - Popular time slots
   - Doctor popularity
   - Booking patterns

## Architecture Improvements (If More Time)

### State Management

- **Current**: React Context API
- **Improvement**: Consider Redux Toolkit for better dev tools and middleware support
- **Benefit**: Better debugging, time-travel debugging, middleware for API calls

### API Layer

- **Current**: Direct fetch calls
- **Improvement**: Implement API client with interceptors
- **Benefit**: Centralized error handling, request/response transformation, retry logic

### Component Architecture

- **Current**: Screen-level components
- **Improvement**: Extract more reusable components
- **Benefit**: Better code reusability, easier testing, consistent UI

### Error Handling

- **Current**: Basic try-catch with error messages
- **Improvement**: Error boundary components and error reporting
- **Benefit**: Better error recovery, crash reporting, user feedback

### Performance

- **Current**: Basic React Native optimizations
- **Improvement**: Implement React.memo, useMemo, useCallback strategically
- **Benefit**: Better rendering performance, smoother animations

## Development Notes

### Code Style

- TypeScript strict mode enabled
- ESLint configured for code quality
- Consistent naming conventions (camelCase for variables, PascalCase for components)

### Best Practices Followed

- Separation of concerns (services, components, screens)
- Type safety with TypeScript
- Error handling at appropriate levels
- Loading and error states for async operations
- Accessible UI components
- Testable code structure

## License

This project is created for the ShiftCare Technical Challenge.

## Contact

For questions or issues, please refer to the project repository or contact the development team.
